---
import { Image } from "astro:assets";
import { isFileVideo } from "../lib/utils";
import type { ImageMetadata } from "astro";

type Props = {
  media: {
    src: ImageMetadata | string;
    alt: string;
  };
};

const { media } = Astro.props as Props;
const isVideo = typeof media.src === "string" && isFileVideo(media.src);
---

{
  !isVideo ? (
    <Image src={media.src as ImageMetadata} alt={media.alt} class="media" />
  ) : isVideo ? (
    <video src={media.src as string} class="media" autoplay loop muted />
  ) : null
}

<style>
  .media {
    object-fit: cover;
    width: 6rem;
    height: 6rem;
    margin-right: 1rem;
    border-radius: 0.375rem;
  }
</style>
